<h1>Listing Events</h1>
<table>
  <tr>
    <th>Event-Name</th>
    <th>Description</th>
    <th>Event-Time</th> 
    <th>Invited by</th>
    <th>Event-State</th>
    <th>Action</th>
  </tr>
 

<% @states.each do |state| %>
    <tr>
      <td><%= state.evennt.eventname %></td>
      <td><%= state.evennt.description %></td>
      <td><%= state.evennt.eventtime %></td>
      <td><%= User.find(state.evennt.createdby).username %></td>
      <td><%= state.eventstate%></td>
      <td>
        <%if state.eventstate == "Accepted"%>
          <%=button_to 'Reject', {:controller => "dashboard", :action => "updatestate",:evennt_id =>  state.evennt.id, :user_id=> @user.id ,:state=>"Rejected"}, :method=>:patch%>
        
        <% elsif state.eventstate == "Rejected"%>
          <%=button_to 'Accept', {:controller => "dashboard", :action => "updatestate",:evennt_id =>  state.evennt.id, :user_id=> @user.id ,:state=>"Accepted"}, :method=>:patch%>
        
        <%else%>
          <%=button_to 'Reject', {:controller => "dashboard", :action => "updatestate",:evennt_id =>  state.evennt.id, :user_id=> @user.id ,:state=>"Rejected"}, :method=>:patch%>

          <%=button_to 'Accept', {:controller => "dashboard", :action => "updatestate",:evennt_id =>  state.evennt.id, :user_id=> @user.id ,:state=>"Accepted"}, :method=>:patch%>
        <%end%>
      </td>
    </tr>
  <% end %>
</table>